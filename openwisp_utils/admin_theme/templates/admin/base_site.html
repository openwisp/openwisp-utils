{% extends "base.html" %}
{% load static i18n %}

{% block title %}{{ title }} | {{ site_title }}{% endblock %}

{% block extrastyle %}
{{ block.super }}
{% if OPENWISP_ADMIN_THEME_LINKS %}
    {% for link in OPENWISP_ADMIN_THEME_LINKS %}
        <link rel="{{ link.rel }}" type="{{ link.type }}"
              href="{{ link.href }}" {% if link.media %}media="{{ link.media }}" {% endif %}/>
    {% endfor %}
{% else %}
    <link rel="stylesheet" type="text/css" href="{% static "admin/css/openwisp.css" %}" />
    <link rel="icon" type="image/x-icon" href="{% static "ui/openwisp/images/favicon.png" %}" />
{% endif %}
{% endblock %}


{% block menu %}
{% include "./menu.html" %}
{% endblock %}

{% block nav-global %}
    {% if user.is_authenticated %}
    <div class="head">
         <span class="menu-toggle"></span>
         <div id="header-nav">
            {% block header-menu %}
                <span class="user">
                <strong>{% firstof user.get_short_name user.get_username %}</strong>
                </span>
            {% endblock  %}
         </div>
    </div>
    {% endif %}
{% endblock nav-global %}

{% block branding %}
{% if not user.is_authenticated %}
<h1 id="site-name"><a href="{% url 'admin:index' %}">{{ site_header }}</a></h1>
{% endif %}
{% endblock %}

{% block footer %}
<div id="ow-loading" class="ow-overlay">
  <div class="ow-overlay-inner">
    <div class="ow-loading-spinner"></div>
  </div>
</div>
{% comment %}
    we need to put the JS here otherwise
    if we put it in extrahead it will be
    loaded before jQuery is loaded
{% endcomment %}
{% if has_permission %}
    <script src="{% static "admin/js/menu.js" %}"></script>
{% endif %}
{% if OPENWISP_ADMIN_THEME_JS %}
    {% for js in OPENWISP_ADMIN_THEME_JS %}
        <script src="{{ js }}"></script>
    {% endfor %}
{% endif %}
{% endblock %}
